bundlesPath: ./path/to/bundles

bundleConfigFormats:
  - .yaml
  - .js
  - .json

localConfigPath: ./.gulpw

localConfigBackupPath: ./.gulpw/backups

staticTasks:
  "config":
    constructorLocation: ./task-proxies/ConfigAdapter
    
  "deploy-config":
    constructorLocation: ./task-proxies/DeployConfigAdapter
    
  "bundle":
    constructorLocation: ./task-proxies/BundleAdapter
    emptyBundleFile: ./configs/empty.bundle.template.yaml
    allowedTasks:
      - browserify
      - compass
      - copy
      - csslint
      - deploy
      - jasmine
      - jshint
      - mocha
      - requirejs
      - watch
    
tasks:

  # Browserify Defaults
  browserify:
    constructorLocation: ./bundle/task-proxies/BrowserifyAdapter
    priority: 92

  # Build Task (Looks through {bundle-alias}.yaml file and runs
  # all tasks that are not in the `ignoredTasks` array in this config.
  build:
    constructorLocation: ./bundle/task-proxies/BuildAdapter
    priority: -98

    prelimTasks:
      - mocha
      - jasmine

    ignoredTasks:
      - clean
      - deploy
      - jshint
      - csslint

  clean:
    constructorLocation: ./bundle/task-proxies/CleanAdapter
    priority: 100
    allowedFileTypes:
      - js
      - css
      - html

  compass:
    constructorLocation: ./bundle/task-proxies/CompassAdapter
    priority: 98
    configrb: null # config.rb home
    
  copy:
    constructorLocation: ./bundle/task-proxies/CopyAdapter
    priority: 99
    
  csslint:
    priority: 97
    constructorLocation: ./bundle/task-proxies/CssLintAdapter
    csslintrc: null
    
  # Deploy Task
  deploy:
    # @todo add a flag for ignoring the deployment of artifacts
    constructorLocation: ./bundle/task-proxies/DeployAdapter
    priority: -100

    # Whether to deploy files using unix paths (useful if you're on Windows and need to deploy to a *nix type server)
    deployUsingUnixStylePaths: true

    # Options written by `gulpw deploy-config`
    developingDomain: null
    hostnamePrefixFolder: null
    hostnamePrefix: null
    hostname: null
    port: 22
    username: null
    password: null
    publickeyPassphrase: null
    privatekeyLocation: null

    # File types that are allowed for deployment
    allowedFileTypes:
      - js
      - css
      - html
      - json
      - yaml
      - jpg
      - png
      - gif
      - md
      - mkd

    # Hash of domains to develop for:
    domainsToDevelop: null

  jasmine:
    constructorLocation: ./bundle/task-proxies/JasmineAdapter
    priority: 95
    files: null # testDir or array of files (test files)
    options: null
    
  jshint:
    constructorLocation: ./bundle/task-proxies/JsHintAdapter
    priority: 96
    jshintrc: ./.jshintrc
    ignoreFiles: null
    options:
      predef:
        - $
        - _
        - amplify
        - Backbone
        - browserify
        - define
        - jQuery
        - Modernizr
        - Mustache
        - Marionette
        - require
        - sjl
    
  minify:
    constructorLocation: ./bundle/task-proxies/MinifyAdapter
    priority: 91
    header: |
      /*! Company Name * http://www.company-website.com * Filename: <%= bundle.options.alias + '.' + fileExt %> * Version: <%= bundle.options.version %> * Created: (<%= (new Date()).getTime() %>) * Hashsum: <%= fileHashType %>:<%= bundle[fileExt + 'Hash'] %> */
    cssBuildPath: some/path/to/build/path
    htmlBuildPath: some/path/to/build/path
    jsBuildPath: some/path/to/build/path
    fileHashType: sha256
    createFileHashes: true
    allowedFileTypes:
      - js
      - css
      - html
    htmlTaskOptions:
      spare: true
      comments: false
    jsTaskOptions: {}
    useMinPreSuffix: false
    useVersionNumInFileName: false
    template:
      templatePartial: null
      compressWhitespace: true
      templateTypeKeys:
        - mustache
        - handlebars
        - ejs

      # Use the file path as they key
      useFilePathAsKey: true

      # Removes the file extension on the key
      removeFileExtensionsOnKeys: true

      # Sets the key to everything after this string (file extension part depends on `removeFileExtensionsOnKeys`)
      splitKeyAt: ./

  mocha:
    constructorLocation: ./bundle/task-proxies/MochaAdapter
    priority: 94
    files: null # testDir or array of files (test files)
    options: null
    
  # RequireJs Defaults
  requirejs:
    constructorLocation: ./bundle/task-proxies/RequireJsAdapter
    priority: 93
    
  # Watch Task Defaults
  watch:
    constructorLocation: ./bundle/task-proxies/WatchAdapter
    priority: -99

    # Tasks to ignore on the bundle level (watch creates it's own
    # collection of deploy tasks from the bundle(s) registered with it)
    ignoredTasks:
      - clean
      - deploy

    # Tasks to run on file changes ** Note ** only tasks that match changed file types will be run
    tasks:
      - build
      - deploy
